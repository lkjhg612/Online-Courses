<div class="body">
  <section id="menu">
    <div class="logo">

      <a href="/admin">
        <h2>Admin</h2></a>
    </div>

    <div class="items">
      <li><i class=""></i><a href="/admin">Home</a></li>

      <li><i class=""></i><a href="/me/stored/courses">Courses</a></li>

      <li><i class=""></i><a href="/me/stored/paycourses">PayCourses</a></li>

      <li><i class=""></i><a
          href="/me/stored/registercourses"
        >RegisteredCourses</a></li>

    </div>
  </section>

  <section id="interface">
    <div class="navigation">
      <div class="n1">
        <div class="search">
          {{! <input type="text" placeholder="Search" />
          <button class="btnSearch" type="submit"><i class="fa fa-search"></i></button> }}
          <input class="btnsearchUser" type="button" value="Search Order" />
        </div>
      </div>

      <div class="protofile">

        <div class="menudrop">
          {{#if yAdmin}}
            <img src="/khangImage/{{datac.image.name}}" />
            <span>{{datac.firstName}}</span>
          {{else}}
            <img src="img/profile.png" alt="" />
          {{/if}}

          <ul class="subnav-us">
            <li><a href="#">Cài đặt tài khoản</a></li>
            <li><a class="log-out" href="#">Log Out</a></li>
          </ul>
        </div>
      </div>
    </div>

    <h3 class="i-name">
      List Order
    </h3>

    <input class="btnaddUser" type="button" value="Add Order" />

    <dir class="board">
      <table style=" width : 100% ">
        <thead>
          <tr>
            <td>Number</td>
            <td>ID</td>
            <td>Name</td>
            <td>Email</td>
            <td>NameCourse</td>
            <td>Phone</td>
            <td>Price</td>
            <td>PayMent</td>
            <td>Status</td>
          
    
          </tr>
        </thead>
        <tbody>
          {{#each rcourse}}
            <tr>

              <td class="people">
               {{sum @index 1}}
              </td>
              <td class="people-des">
                <h5>{{this._id}}</h5>
              </td>

              <td>
                {{this.rFirstName}}
              </td>

              <td>
                {{this.rEmail}}
              </td>

              <td>
                {{this.rCourseName}}
              </td>
                <td>
                {{this.rPhone}}
              </td>

                <td>
                {{this.rPriceCourse}}
              </td>

                <td>
                {{this.rPay}}
              </td>

                <td>
                {{this.rStatus}}
              </td>

              <td class="edit">
                <a
                  data-id="{{this._id}}"
                  data-name="{{this.rFirstName}}"
                  data-email="{{this.rEmail}}"
                  data-coursename = "{{this.rCourseName}}"
                  data-phone="{{this.rPhone}}"
                  data-price = "{{this.rPriceCourse}}"
                  data-pay = "{{this.rPay}}"
                  data-status = "{{this.rStatus}}"
                  class="btnEditUS"
                  href="#"
                >Edit</a>

              </td>

              <td class="delete">
                <a
                  data-id="{{this._id}}"
                  class="btnDeleteUS"
                  href="#"
                >Delete</a>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </dir>

  </section>
</div>

<div class="xacnhan">
  <div class="container">
    <header>
      <h1>LOG OUT</h1>
      <div class="nav-closee">
        <i class="fas fa-times"></i>
      </div>
    </header>
    <div class="content-body">
      <form method="POST" action="/logout">
        <p style="text-align:start ;">Bạn có chắc thoát không</p>
        <input type="submit" value="Xác nhận" />
      </form>
    </div>
  </div>
</div>

<div class="editUS">
  <div class="container">
    <header>
      <h1>Edit Order</h1>
      <div class="nav-closee">
        <i class="fas fa-times"></i>
      </div>
    </header>
    <div class="content-body">
      <form
        method="POST"
        action="/courses/redit/?_method=PATCH"
       
      >
        <input
          type="text"
          class="box-id"
          name="id"
          placeholder=""
          readonly="true"
          style="opacity: 0.8 ;"
        />
        <input
          type="text"
          class="box-name"
          name="rFirstName"
          placeholder="Nhập vào tên để thay đổi"
        />
        <input
          type="email"
          class="box-email"
          name="rEmail"
          placeholder="Nhập vào email để thay đổi"
        />
      
        <input
          type="text"
          class="box-phone"
          name="rPhone"
          placeholder="Nhập điện thoại để thay đổi"
        />

         <input
          type="text"
          class="box-coursename"
          name="rCourseName"
          placeholder="Nhập tên khóa học để thay đổi"
        />

          <input
          type="text"
          class="box-price"
          name="rPriceCourse"
          placeholder="Nhập vào giá để thay đổi để thay đổi"
        />
     
        <select
          name="rPay"
          style="margin: 15px 0 ; width: 300px ;  padding: 8px 16px; border-radius: 5px; border: none; border-bottom: 1px solid rgba(238, 12, 185, 0.84); ;"
        >
          <option style="margin: 15px;" value="Momo">MoMo</option>
          <option style="margin: 15px;" value="ZaloPay">ZaloPay</option>
              <option style="margin: 15px;" value="Visa">Visa</option>
               <option style="margin: 15px;" value="MasterCard">MasterCard</option>
        </select>


         <select
          name="rStatus"
          style="margin: 15px 0 ; width: 300px ;  padding: 8px 16px; border-radius: 5px; border: none; border-bottom: 1px solid rgba(238, 12, 185, 0.84); ;"
        >
         <option style="margin: 15px;" value="Processing...">Processing...</option>
          <option style="margin: 15px;" value="Processed">Processed</option>
            
        </select>
        <input type="submit" value="Update" />
      </form>
    </div>
  </div>
</div>

<div class="editUS">
  <div class="container">
    <header>
      <h1>Are you sure delete this Order</h1>
      <div class="nav-closee">
        <i class="fas fa-times"></i>
      </div>
    </header>
    <div class="content-body">
      <form method="post" action="/courses/rdelete/?_method=DELETE">
        <input
          type="text"
          class="box-id"
          name="id"
          placeholder="Nhập vào tên để thay đổi"
          readonly="true"
          style="opacity: 0.8 ;"
        />
        <input type="submit" value="Delete" />
      </form>
    </div>
  </div>
</div>

<div class="editUS">
  <div class="container">
    <header>
      <h1>Add Order</h1>
      <div class="nav-closee">
        <i class="fas fa-times"></i>
      </div>
    </header>
    <div class="content-body">
      <form
        method="post"
        action="/courses/rcreate"
       
      >
      
        <input
          type="text"
          class="box-name"
          name="rFirstName"
          placeholder="Nhập vào tên để thêm"
        />
        <input
          type="email"
          class="box-email"
          name="rEmail"
          placeholder="Nhập email để thêm"
        />
          <input
          type="text"
          class="box-phone"
          name="rPhone"
          placeholder="Nhập điện thoại để thêm"
        />

        <input
          type="text"
          class="box-coursename"
          name="rCourseName"
          placeholder="Nhập tên khóa học trả phí để thêm "
        />
      
        <input
          type="text"
          class="box-price"
          name="rPriceCourse"
          placeholder="Nhập giá tiền để thêm"
        />
       
        <select
          name="rPay"
          style="margin: 15px 0 ; width: 300px ;  padding: 8px 16px; border-radius: 5px; border: none; border-bottom: 1px solid rgba(238, 12, 185, 0.84); ;"
        >
         <option style="margin: 15px;" value="MoMo">MoMo</option>
          <option style="margin: 15px;" value="ZaloPay">ZaloPay</option>
              <option style="margin: 15px;" value="Visa">Visa</option>
               <option style="margin: 15px;" value="MasterCard">MasterCard</option>
        </select>

        <select
          name="rStatus"
          style="margin: 15px 0 ; width: 300px ;  padding: 8px 16px; border-radius: 5px; border: none; border-bottom: 1px solid rgba(238, 12, 185, 0.84); ;"
        >
         <option style="margin: 15px;" value="Processing...">Processing...</option>
          <option style="margin: 15px;" value="Processed">Processed</option>
            
        </select>

        
        <input type="submit" value="Add Order" />
      </form>
    </div>
  </div>
</div>

<div class="editUS">
  <div class="container">
    <header>
      <h1>Search Order</h1>
      <div class="nav-closee">
        <i class="fas fa-times"></i>
      </div>
    </header>
    <div class="content-body">
      <form method="post" action="/courses/searchrCourses">
        <input
          type="text"
          class="box-id"
          name="rFirstName"
          placeholder="Nhập tên để tìm kiếm"
          style="opacity: 0.8 ;"
        />
        <input type="submit" value="Search" />
      </form>
    </div>
  </div>
</div>


<script>
  //logout
const formlogout = document.forms["log-out"];
const btnlog = document.querySelectorAll('.log-out');
const xacnhan = document.querySelector('.xacnhan');
const  btnCloseXN = document.querySelector('.xacnhan .nav-closee');



if(btnCloseXN != null){
btnCloseXN.onclick = function(){
    xacnhan.classList.remove("openXN")
}
}

if(btnlog != null){
btnlog.forEach(ele => {
    ele.onclick = function(){
   
         xacnhan.classList.add("openXN")
    }
})
}



//form edit
 const btnED = document.querySelectorAll(".btnEditUS")
 const modalED = document.querySelector(".editUS");
  
 const  btnCloseED = modalED.querySelector(".editUS header .nav-closee");

 const ID = modalED.querySelector(".box-id")
 const name1 = modalED.querySelector(".box-name")
 const mail1 = modalED.querySelector(".box-email")
 const phone1 = modalED.querySelector(".box-phone")
const coursename1 = modalED.querySelector(".box-coursename")
const pricecourse = modalED.querySelector(".box-price")





 for(var btnED2 of btnED){
    btnED2.onclick = function(){
        modalED.classList.add("openXN")
        console.log(this.getAttribute("data-id"))
        var id = this.getAttribute("data-id")
        var name = this.getAttribute("data-name")
        var mail = this.getAttribute("data-email")
        var phone = this.getAttribute("data-phone")
        var coursename = this.getAttribute("data-coursename")
        var price = this.getAttribute("data-price")
    
        

        ID.value = id
        name1.value = name
        mail1.value = mail
        phone1.value = phone
        coursename1.value = coursename
        pricecourse.value = price

     
        
    }
}

btnCloseED.onclick = function(){
    modalED.classList.remove("openXN")
}

// Delete Order
const btnDL = document.querySelectorAll(".btnDeleteUS")

const modalDL = document.querySelectorAll(".editUS")[1];

const btnCloseDL = modalDL.querySelector(".editUS header .nav-closee"); 

const ID2 = modalDL.querySelector(".box-id");


for(var btnDL2 of btnDL){
    btnDL2.onclick = function(){
        modalDL.classList.add("openXN")
        console.log(this.getAttribute("data-id"))
        var id = this.getAttribute("data-id")
        ID2.value = id;
    }
}

btnCloseDL.onclick = function(){
    modalDL.classList.remove("openXN")
}

//create Order

const btnAdd = document.querySelectorAll(".btnaddUser")

const modalAdd = document.querySelectorAll(".editUS")[2];

const btnCloseAdd = modalAdd.querySelector(".editUS header .nav-closee"); 

const ID3 = modalAdd.querySelector(".box-id");

for(var btnDL3 of btnAdd){
    btnDL3.onclick = function(){
        modalAdd.classList.add("openXN")
        console.log(this.getAttribute("data-id"))
        var id = this.getAttribute("data-id")
        ID3.value = id;
    }
}

btnCloseAdd.onclick = function(){
    modalAdd.classList.remove("openXN")
}



//search User
const btnSearch = document.querySelectorAll(".btnsearchUser")

const modalSearch = document.querySelectorAll(".editUS")[3];

const btnCloseSearch = modalSearch.querySelector(".editUS header .nav-closee"); 


for(var btnS of btnSearch){
    btnS.onclick = function(){
        modalSearch.classList.add("openXN")
        
    }
}

btnCloseSearch.onclick = function(){
    modalSearch.classList.remove("openXN")
}

</script>